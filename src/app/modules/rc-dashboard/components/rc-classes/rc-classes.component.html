<div class="rc-classes">
  <div class="py-2 d-flex">
    <span class="h3">Classes</span>
    <span class="spacer"></span>
    <span class="px-2">
      <button (click)="saveClassAction()" class="p-button-rounded" icon="pi pi-plus-circle" pButton></button>
    </span>
    <span class="px-2">
      <button (click)="loadClasses()" class="p-button-rounded" icon="pi pi-refresh" pButton type="button"></button>
    </span>
  </div>

  <div class="py-2">
    <div class="container-fluid">
      <div class="row py-2">
        <div class="form-group row">
          <div class="col-8">
            <p-dropdown (onChange)="loadClasses()" [placeholder]="'Select School Section'" [options]="sections" [optionLabel]="'name'" [optionValue]="'id'" [styleClass]="'w-100'"></p-dropdown>
          </div>
          <div class="col-4">
            <button (click)="loadClasses()" class="" pButton>Load Classes</button>
          </div>
        </div>
      </div>
      <div *ngIf="classes.length == 0" class="row py-2">
        <span class="text-center">No classes for this section</span>
      </div>
      <div *ngIf="classes.length != 0" class="">
        <p-panel [header]="classLevel.classLevel.name" [toggleable]="true" *ngFor="let classLevel of classes">
          <ng-template pTemplate="icons">
            <button pButton class="p-panel-header-icon p-link" icon="pi pi-plus"></button>
            <button pButton class="p-panel-header-icon p-link" icon="pi pi-pencil" [routerLink]="['/class/view', 1]"></button>
            <button pButton class="p-panel-header-icon p-link" icon="pi pi-trash" (click)="saveClassAction(classLevel.classLevel)"></button>
          </ng-template>
          <ng-template pTemplate="body">
            <div class="grid">
              <div class="col-4" *ngFor="let classLevelSub of classLevel.classLevelSubs">
                <p-card header="{{classLevelSub.name}}" styleClass="p-card-shadow">
                  Number of student applied: 23
                  <!-- TODO fetch this data from backend -->
                </p-card>
              </div>
            </div>
          </ng-template>
        </p-panel>
      </div>
    </div>
  </div>
</div>
