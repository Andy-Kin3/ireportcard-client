<div class="container">
  <div class="py-5">
    <div class="d-flex">
      <span class="h3">Save Student</span>
      <span class="spacer"></span>
      <span class="">
        <button (click)="modal.close()" class="p-button-rounded p-button-danger p-button-text" icon="pi pi-times" pButton></button>
      </span>
    </div>
    <div class="p-3">
      <form [formGroup]="applicationForm" class="">
        <div class="form-group">
          <select class="form-select" [formControlName]="'studentId'">
            <option *ngFor="let student of students" [value]="student.id" [selected]="student.id == (studentApplicationRes ? studentApplicationRes.student.id : -1)">
              {{student.name}}
            </option>
          </select>
        </div>
        <div class="form-group row">
          <div class="col-md-6">
            <label for="academicYear">Academic Year</label>
            <select id="academicYear" class="form-select" [formControlName]="'yearId'">
              <option *ngFor="let academicYear of academicYears" [value]="academicYear.id">
                {{academicYear.name}}
              </option>
            </select>
          </div>
          <div class="col-md-6">
            <label for="classLevel">Class Level</label>
            <select id="classLevel" class="form-select" [formControlName]="'classId'">
              <option *ngFor="let classLevel of classLevels" [value]="classLevel.id">
                {{classLevel.name}}
              </option>
            </select>
          </div>
        </div>
        <div class="form-group py-2">
          <!-- a styled list of subjects -->
          Subjects:
          <div class="d-flex rc-aps">
            <table class="table">
              <tr *ngFor="let aps of applicationSubjects" class="table-row">
                <td>{{aps.subject.name}}</td>
                <td>{{aps.subject.coefficient}}</td>
                <td>
                  <button class="p-button-rounded p-button-danger p-button-text" icon="pi pi-times" pButton></button>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="row py-2">
          <div class="col-md-3">
            <button (click)="addSubject($event, subjectSelect)"  class="btn btn-primary">Add</button>
          </div>
          <div class="col-md-9">
            <select #subjectSelect class="form-select" [hidden]="true">
              <option *ngFor="let s of subjects" [value]="s.id">{{s.name}}</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <span class="py-2">
            <button (click)="saveApplication()" [disabled]="!applicationForm.valid" class="btn full-width" icon="pi pi-check" label="Save" pButton type="button"></button>
          </span>
        </div>
      </form>
    </div>
  </div>
</div>
